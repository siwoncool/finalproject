<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="siwon">
  <meta name="date" content="2023.01.27">
  <meta name="description" content="게시물 리스트">
  <title></title>

  <link rel="shortcut icon" href="favicon.ico">

  <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700" rel="stylesheet">

  <!-- Animate.css -->
  <link rel="stylesheet" href="css/main/animate.css">
  <!-- Icomoon Icon Fonts-->
  <link rel="stylesheet" href="css/main/icomoon.css">
  <!-- Bootstrap  -->
  <link rel="stylesheet" href="css/main/bootstrap.css">
  <!-- Flexslider  -->
  <link rel="stylesheet" href="css/main/flexslider.css">
  <!-- Flaticons  -->
  <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
  <!-- Owl Carousel -->
  <link rel="stylesheet" href="css/main/owl.carousel.min.css">
  <link rel="stylesheet" href="css/main/owl.theme.default.min.css">
  <!-- Theme style  -->
  <link rel="stylesheet" href="css/main/style.css">

  <link rel="stylesheet" href="css/header.css">

  <link rel="stylesheet" href="css/category.css">
  <link rel="stylesheet" href="css/selection.css">


  <!-- script
  ================================================== -->
  <script src="js/modernizr.js"></script>

  <!-- Modernizr JS -->
  <script src="js/modernizr-2.6.2.min.js"></script>
  <!-- FOR IE9 below -->
  <!--[if lt IE 9]>
  <script src="js/respond.min.js"></script>
  <![endif]-->

</head>
<style th:replace="mouse.html :: style"></style>
<body>
<div id="colorlib-page">
  <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>

  <header th:replace="sider.html :: header"></header>


  <div id="colorlib-main">
    <div class="colorlib-blog">
      <div class="colorlib-narrow-content">
        <div class="row">
          <div class="col-md-6 col-md-offset-3 col-md-pull-3 animate-box" data-animate-effect="fadeInLeft">
            <h2 class="colorlib-heading">Read Blog</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 col-md-offset-3 col-md-pull-3 animate-box" data-animate-effect="fadeInLeft">
            <div class="container">
              <div id="get-in-touch" class="colorlib-bg-color" style="background-color: #FFFFFF">
                <p><a href="WOR1" style="border: 2px solid #FFC300" class="btn btn-primary btn-learn">workspace 생성</a></p>
              </div>
            </div>
          </div>
        </div>
        <div class="category-links" style="text-align: left">
          <!--DDAN 서브카테고리-->
          <span id="DDANsubCategory">
        </div>

    <input type="hidden" id="category"th:value="${paging.category}">
        <div class="row">
          <div th:each="wlist : ${wlist}">
            <div class="col-md-4 col-sm-6 animate-box" data-animate-effect="fadeInLeft" style="width: 400px; height: 750px; margin-left: 75px">
              <div class="blog-entry" style="width: 400px;height: 750px">
                <a th:href="@{WOR4(workCode=${wlist.workCode}, category=${wlist.category})}" class="blog-img"><img th:src="@{junho/workSpaceImg/{img}(img=${wlist.workImgName})}" style="width: 300px; height: 300px;" width="300px" height="280px" class="img-responsive" alt="HTML5 Bootstrap Template by colorlib.com"></a>
                <div class="desc">
                  <span><small>[[${wlist.memName}]] </small> | <small>[[${wlist.memGrade}]]</small> | <small> <i class="icon-bubble3"></i></small></span>
                  <span>[[${wlist.workTitle}]]</span><span style="display: flex" th:text="${wlist.workTag}" class="reTag"></span>
                  <small>게시글 좋아요 수 :[[${wlist.likeNum}]]</small> |<small> 댓글 :[[${wlist.comentNum}]]</small> |<small> 조회수 : [[${wlist.HitNum}]]</small> |<small> 게시글 : [[${wlist.BoardNum}]]</small> |
                  <h3><a th:href="@{WOR4(workCode=${wlist.workCode})}">[[${wlist.workTitle}]]</a></h3>
                </div>
              </div>
            </div>
          </div>
        </div>

  <label class="select">
  <select id="order" onchange="orderby(this.value)">
    <option disabled="disabled" selected="selected">정렬</option>
    <option value="workCode">최신순</option>
    <option value="likeNum">좋아요 순</option>
    <option  value="HitNum">조회수 순</option>
  </select>
    <svg>
      <use xlink:href="#select-arrow-down"></use>
    </svg>
  </label>

  <input type="hidden" id="cateCode" th:value="${paging.cateCode}">

  <div class="row">
    <div class="col-md-12 animate-box" data-animate-effect="fadeInLeft">
      <ul class="pagination">
        <li th:if="${paging.page <= 1}"><a>[이전]</a></li>
  <li th:if="${paging.page > 1}">
    <a th:href="@{DRA008_1(page=${paging.page -1} , limit=${paging.limit},category=${paging.category},cateCode=${paging.cateCode},orderby=${paging.orderby})}">[이전]</a>
  </li>
  &nbsp;
  <!-- [페이지 번호] 페이지에 대한 처리 -->
  <li th:each="i : ${#numbers.sequence(paging.startpage, paging.endpage)}">
    <a th:href="@{DRA008_1(page=${i} , limit=${paging.limit} ,category=${paging.category},cateCode=${paging.cateCode},orderby=${paging.orderby})}"><span th:if="${paging.page == i}">
                                                    [[${i}]]
                                                </span>
    <span th:unless="${paging.page == i}">
                                                    [[${i}]]
                                                </span></a>
  </li>
  <!-- [다음] 페이지에 대한 처리 -->
  &nbsp;
  <li th:if="${paging.page >= paging.maxpage}">[다음]</li>
  <li th:if="${paging.page < paging.maxpage}">
    <a th:href="@{DRA008_1(page=${paging.page +1}, limit=${paging.limit},category=${paging.category},cateCode=${paging.cateCode},orderby=${paging.orderby})}">[다음]</a>
  </li>
      </ul>
</div>
</div>
  </div>
    </div>
  </div>
</div>

<block th:if="${session.login ne null}">
  <input type="hidden" id="loginId" th:value="${session.login.memCode}">
</block>
</body>

<!-- jQuery -->
<script src="js/jquery.min.js"></script>
<!-- jQuery Easing -->
<!--<script src="js/jquery.easing.1.3.js"></script>-->
<!-- Bootstrap -->
<script src="js/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="js/jquery.waypoints.min.js"></script>
<!-- Flexslider -->
<script src="js/jquery.flexslider-min.js"></script>
<!-- Sticky Kit -->
<script src="js/sticky-kit.min.js"></script>
<!-- Owl carousel -->
<script src="js/owl.carousel.min.js"></script>
<!-- Counters -->
<script src="js/jquery.countTo.js"></script>


<!-- MAIN JS -->
<script src="js/main.js"></script>

<!--DDAN 서브카테고리 가져오기-->
<!--<script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>-->
<script>
  /*서브 카테고리 가져와 열기*/
  let category = $('#category').val();
  let cateCode = $('#cateCode').val();
  $.ajax({
    type: 'post',
    url : 'category',
    data:{
      "cate" : category
    },
    dataType: "json",
    success:
            function(subCategoryList){
              console.log("연결");
              /*선택 리스트 출력*/
              musicSubCategory(subCategoryList);
            },
    error:function (){
      alert('category 연결 실패')
    }
  })

  function musicSubCategory(List){
    let output=""
    output +="  <a href=\"DRA008_1?category="+category+"\" >전체</a>"
    for(let i in List){

      output += "<a href=\"DRA008_1?cateCode="+List[i].cateCode+"&category="+category+"\">"+List[i].subCategory+"</a>"
    }

    $("#DDANsubCategory").html(output);
  }
function orderby(order){
    location.href="DRA008_1?cateCode="+cateCode+"&category="+category+"&orderby="+order;
}

</script>
<script>
  let retag = $('.reTag');

  for (let i = 0; i <   retag.length; i++) {
    let tagArr = $(retag[i]).text().split(",")
    let input = "";

    for ( j in tagArr){
      //console.log(tagArr[j]);
      input += "<a href='UnifiedSearch?q="+tagArr[j].replace('#','%23')+"'>"+tagArr[j]+"</a>"+"<br/>";
    }
    $(retag[i]).html(input);
  }

</script>

</html>

